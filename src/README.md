Branch for add k-nearest neighbors compatibility